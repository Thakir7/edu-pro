<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¨</title>
  <link rel="stylesheet" href="assets/style.css">
  <script src="assets/config.js"></script>
  <script src="assets/app.js"></script>

  <style>
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:900px){.grid2{grid-template-columns:1fr}}
    .cardX{background:#fff;border-radius:18px;padding:16px;box-shadow:0 6px 20px rgba(0,0,0,.06)}
    .title{font-size:22px;font-weight:900;margin:0}
    .sub{opacity:.7;margin-top:6px}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap}
    .btn{padding:10px 14px;border-radius:14px;border:0;cursor:pointer;font-weight:800}
    .btn.dark{background:#111;color:#fff}
    .btn.ghost{background:#f2f4f7;color:#111}
    .cards{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;margin-top:14px}
    @media (max-width:900px){.cards{grid-template-columns:1fr}}
    a.cardLink{display:flex;justify-content:space-between;align-items:center;gap:10px;text-decoration:none;color:inherit}
    .icon{width:42px;height:42px;border-radius:14px;background:#f2f4f7;display:flex;align-items:center;justify-content:center;font-size:22px}
    .small{font-size:13px;opacity:.75}
  </style>
</head>

<body>
<div class="container">
  <div class="topbar">
    <div class="brand">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ¯Ø±Ø¨</div>
    <div class="actions">
      <button class="btn ghost" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
    </div>
  </div>

  <div class="cardX">
    <h1 class="title" id="stuName">...</h1>
    <div class="sub" id="stuMeta">...</div>
  </div>

  <div class="cards">
    <a class="cardX cardLink" href="attendance.html">
      <div>
        <div style="font-weight:900">Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¶ÙˆØ±</div>
        <div class="small">Ø¹Ø±Ø¶ Ø§Ù„Ø­Ø¶ÙˆØ± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</div>
      </div>
      <div class="icon">ğŸ“Œ</div>
    </a>

    <a class="cardX cardLink" href="grades.html">
      <div>
        <div style="font-weight:900">ÙƒØ´Ù Ø§Ù„Ø¯Ø±Ø¬Ø§Øª</div>
        <div class="small">Ø¹Ø±Ø¶ Ø§Ù„Ø¯Ø±Ø¬Ø§Øª ÙˆØ§Ù„ØªÙØ§ØµÙŠÙ„</div>
      </div>
      <div class="icon">ğŸ§¾</div>
    </a>

    <a class="cardX cardLink" href="plan.html">
      <div>
        <div style="font-weight:900">Ø®Ø·Ø© Ø§Ù„Ù…Ù†Ù‡Ø¬</div>
        <div class="small">Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø·Ø© Ø¨Ø´ÙƒÙ„ Ø¬Ø¯ÙˆÙ„ÙŠ</div>
      </div>
      <div class="icon">ğŸ“š</div>
    </a>

    <a class="cardX cardLink" href="schedule.html">
      <div>
        <div style="font-weight:900">Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØªØ¯Ø±Ø¨</div>
        <div class="small">Ø§Ù„ÙŠÙˆÙ… â€¢ Ø§Ù„ÙˆÙ‚Øª â€¢ Ø§Ù„Ù‚Ø§Ø¹Ø© â€¢ Ø§Ù„Ù…Ù‚Ø±Ø±</div>
      </div>
      <div class="icon">ğŸ—“ï¸</div>
    </a>

    <a class="cardX cardLink" href="services.html">
      <div>
        <div style="font-weight:900">Ø§Ù„ØªØ°Ø§ÙƒØ±</div>
        <div class="small">Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø±Ø¯</div>
      </div>
      <div class="icon">ğŸ«</div>
    </a>
  </div>
</div>

<script>
(async function initStudent(){
  // âœ… Ù„Ø§ ØªØ³Ù…Ø­ Ø¨ÙØªØ­ Ø§Ù„ØµÙØ­Ø© Ø¨Ø¯ÙˆÙ† Ø¬Ù„Ø³Ø©
  const s = requireSession();
  if (!s) return;

  // âœ… Ø¬Ù„Ø¨ Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø§Ù„Ù…ØªØ¯Ø±Ø¨ Ù…Ù† Ø§Ù„Ø´ÙŠØª (Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø´Ø¹Ø¨Ø©)
  const prof = await apiCall({ action:"getProfile", traineeId: s.traineeId });

  if(!prof.ok){
    // Ø¬Ù„Ø³Ø© ØºÙŠØ± ØµØ­ÙŠØ­Ø©
    localStorage.removeItem("edu_session");
    location.replace("index.html");
    return;
  }

  // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ø§Ù„Ø´Ø¹Ø¨Ø© (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù†Ø§Ù‚ØµØ©)
  const session = { ...s, ...prof.trainee };
  localStorage.setItem("edu_session", JSON.stringify(session));

  document.getElementById("stuName").textContent = session.name || "Ù…ØªØ¯Ø±Ø¨";
  document.getElementById("stuMeta").textContent =
    `Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠ: ${session.traineeId} â€¢ Ø§Ù„Ø´Ø¹Ø¨Ø©: ${session.group || "-"} â€¢ Ø§Ù„Ù…Ø±Ø´Ø¯ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠ: ${session.advisor || "-"}`;

})();
</script>
</body>
</html>
